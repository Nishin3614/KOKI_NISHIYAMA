// ------------------------------------------------------------------------------------------
//
// ゲームオーバー処理の説明[gameover.cpp]
// Author : Koki Nishiyama
//
// ------------------------------------------------------------------------------------------

// ------------------------------------------------------------------------------------------
//
// インクルードファイル
//
// ------------------------------------------------------------------------------------------
#include "gameover.h"
#include "gameovercomment.h"
#include "input.h"
#include "joypad.h"
#include "fade.h"
#include "sound.h"
#include "element.h"

// ------------------------------------------------------------------------------------------
//
// マクロ定義
//
// ------------------------------------------------------------------------------------------

// ------------------------------------------------------------------------------------------
//
// グローバル変数
//
// ------------------------------------------------------------------------------------------

// ------------------------------------------------------------------------------------------
//
// プレイヤー初期化処理
//
// ------------------------------------------------------------------------------------------

void InitGameover(void)
{
	// ゲーム要素の初期化処理
	InitElement();

	// ゲームオーバーコメントの初期化処理
	InitGameoverComment();
}

// ------------------------------------------------------------------------------------------
//
// プレイヤー終了処理
//
// ------------------------------------------------------------------------------------------

void UninitGameover(void)
{
	// ゲーム要素の終了処理
	UninitElement();

	// ゲームオーバーコメントの終了処理
	UninitGameoverComment();
}

// ------------------------------------------------------------------------------------------
//
// プレイヤー更新処理
//
// ------------------------------------------------------------------------------------------

void UpdateGameover(void)
{
	// ゲーム要素の更新処理
	UpdateElement();

	// ゲームオーバーコメントの更新処理
	UpdateGameoverComment();

	// 画面遷移
	if (GetKeyboardTrigger(DIK_RETURN) && GetFade() == FADE_NONE ||
		GetJoyboardTrigger(0, JOYPADKEY_B) && GetFade() == FADE_NONE ||
		GetKeyboardTrigger(DIK_J) && GetFade() == FADE_NONE)
	{
		// SE
		PlaySound(SOUND_LABEL_SE_ENTER);

		// ランキングへ
		SetFade(MODE_TITLE);
	}

}

// ------------------------------------------------------------------------------------------
//
// プレイヤー描画処理
//
// ------------------------------------------------------------------------------------------

void DrawGameover(void)
{
	// ゲーム要素の描画処理
	DrawElement();

	// ゲームオーバーコメントの描画処理
	DrawGameoverComment();
}